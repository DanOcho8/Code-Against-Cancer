{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %} <!-- Ensure widget tweaks is installed -->

{% block title %}Sign Up for CodeAgainstCancer{% endblock %}

{% block content %}
<style>
    html, body {
      width: 100%;
      height: 100%;
    }
    
    body {
        background: linear-gradient(-45deg, #add8e6, #ff69b4, #add8e6, #c71585);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
    }
    
    @keyframes gradient {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
    </style>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow mb-5">
                    <div class="card-body p-5">
                        <h3 class="text-center mb-4">Sign Up for CodeAgainstCancer</h3>
    
                        <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            
                            <!-- Username -->
                            <div class="mb-3">
                                {{ form.username.label_tag }}
                                {{ form.username|add_class:"form-control" }}
                                {{ form.username.errors }}
                            </div>
    
                            <!-- First Name and Last Name side by side -->
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    {{ form.first_name.label_tag }}
                                    {{ form.first_name|add_class:"form-control" }}
                                    {{ form.first_name.errors }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    {{ form.last_name.label_tag }}
                                    {{ form.last_name|add_class:"form-control" }}
                                    {{ form.last_name.errors }}
                                </div>
                            </div>
    
                            <!-- Email -->
                            <div class="mb-3">
                                {{ form.email.label_tag }}
                                {{ form.email|add_class:"form-control" }}
                                {{ form.email.errors }}
                            </div>
    
                            <!-- Phone Number -->
                            <div class="mb-3">
                                {{ form.phone_number.label_tag }}
                                {{ form.phone_number|add_class:"form-control" }}
                                {{ form.phone_number.errors }}
                            </div>
    
                            <!-- Password1 and Password2 -->
                            <div class="mb-3">
                                {{ form.password1.label_tag }}
                                {{ form.password1|add_class:"form-control" }}
                                {{ form.password1.errors }}
                            </div>
    
                            <div class="mb-3">
                                {{ form.password2.label_tag }}
                                {{ form.password2|add_class:"form-control" }}
                                {{ form.password2.errors }}
                            </div>
    
                            <!-- Cancer Type and Cancer Stage side by side -->
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    {{ form.cancer_type.label_tag }}
                                    {{ form.cancer_type|add_class:"form-control" }}
                                    {{ form.cancer_type.errors }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    {{ form.cancer_stage.label_tag }}
                                    {{ form.cancer_stage|add_class:"form-control" }}
                                    {{ form.cancer_stage.errors }}
                                </div>
                            </div>
    
                            <!-- Date Diagnosed and Gender side by side -->
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    {{ form.date_diagnosed.label_tag }}
                                    {{ form.date_diagnosed|add_class:"form-control" }}
                                    {{ form.date_diagnosed.errors }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    {{ form.gender.label_tag }}
                                    {{ form.gender|add_class:"form-control" }}
                                    {{ form.gender.errors }}
                                </div>
                            </div>
    
                            <!-- Profile Picture -->
                            <div class="mb-3">
                                {{ form.profile_pic.label_tag }}
                                {{ form.profile_pic|add_class:"form-control-file" }}
                                {{ form.profile_pic.errors }}
                            </div>
    
                            <!-- Consent to Text -->
                            <div class="form-check mb-3">
                                <input type="checkbox" class="form-check-input" id="consent_to_text" name="consent_to_text" {% if form.consent_to_text.value %}checked{% endif %}>
                                <label for="consent_to_text" class="form-check-label">I consent to receive text message reminders</label>
                                {{ form.consent_to_text.errors }}
                            </div>
    
                            <!-- Submit Button -->
                            <button type="submit" class="btn btn-primary w-100 mt-4">Sign Up</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const phoneNumberInput = document.querySelector("#id_phone_number");

    // Set the default value if it's empty
    if (phoneNumberInput.value === "") {
        phoneNumberInput.value = "+1";
    }

    // Ensure the prefix "+1" stays and the user can only edit after it
    phoneNumberInput.addEventListener("input", function() {
        if (!phoneNumberInput.value.startsWith("+1")) {
            phoneNumberInput.value = "+1" + phoneNumberInput.value.replace(/^\+1/, "");
        }
    });

    // Place cursor at the end of input on focus to avoid typing over the "+1"
    phoneNumberInput.addEventListener("focus", function() {
        const end = phoneNumberInput.value.length;
        phoneNumberInput.setSelectionRange(end, end);
    });
});
</script>

    
{% endblock %}
{% block footer %}{% endblock %}